









# 配置文件

## JSON

JSON（JavaScript Object Notation）是一种轻量级的数据交换格式，易于人阅读和编写，同时也易于机器解析和生成。JSON基于JavaScript的对象字面量语法，但是独立于语言，许多编程语言都有解析JSON数据的能力。JSON主要由以下几种数据类型组成：

1. **对象**：在JSON中，一个对象是一组无序的键值对集合，被花括号 `{}` 包围。每个键值对由一个字符串键和一个值组成，键和值（字符串）必须用双引号`""`，键和值之间使用冒号 `:` 分隔，键值对之间使用逗号 `,` 分隔。

   示例：
   ```json
   {
     "name": "Alice",
     "age": 30,
     "city": "New York"
   }
   ```

2. **数组**：数组是一组有序的值列表，被方括号 `[]` 包围。值之间使用逗号 `,` 分隔。

   示例：
   ```json
   [
     "apple",
     "banana",
     "cherry"
   ]
   ```

3. **值**：JSON支持的值类型包括字符串（用双引号 `""` 包围）、数字（整数或浮点数）、布尔值（`true` 或 `false`）、`null`、对象和数组。

   示例：
   ```json
   "Hello, World"
   42
   3.14
   true
   false
   null
   ```

一个综合示例：
```json
{
  "person": {
    "firstName": "John",
    "lastName": "Doe",
    "age": 35,
    "isMarried": true
  },
  "hobbies": ["reading", "cycling", "cooking"],
  "address": {
    "street": "123 Main St",
    "city": "San Francisco",
    "state": "CA",
    "postalCode": "94111"
  }
}
```

这个例子展示了一个包含个人信息（姓名、年龄、婚姻状况）、爱好列表以及地址信息的JSON对象结构。





### 类型转换

JSON转Python

| JSON           | Python |
| :------------- | :----- |
| object -- 对象 | dict   |
| array          | list   |
| string         | str    |
| number (int)   | int    |
| number (real)  | float  |
| true           | True   |
| false          | False  |
| null           | None   |





Python转JSON

| Python                              | JSON           |
| :---------------------------------- | :------------- |
| dict                                | object -- 对象 |
| list, tuple                         | array          |
| str                                 | string         |
| int, float, int 和 float 派生的枚举 | 数字           |
| True                                | true           |
| False                               | false          |
| None                                | null           |





### 基本用法

`dumps` ：字典转json字符串

```python
import json

data = {
    "name": "John",
    "age": 30
}

json_data = json.dumps(data)
print(type(json_data), json_data)  # 输出：<class 'str'> {"name": "John", "age": 30}
```



`loads` ：json字符串转字典

```python
import json

json_string = '{"name": "John", "age": 30}'
parsed_data = json.loads(json_string)
print(type(parsed_data), parsed_data)  # 输出：<class 'dict'> {'name': 'John', 'age': 30}
```



`dump` ：字典写入json文件

```python
import json

data = {
    "name": "John",
    "age": 30
}

with open('data.json', 'w') as json_file:
    json.dump(data, json_file)
```



`load` ：json文件读取成字典

```python
import json

with open('data.json', 'r') as json_file:
    data_loaded = json.load(json_file)
    print(type(data_loaded), data_loaded)  # 输出：<class 'dict'> {'name': 'John', 'age': 30}
```



### 常见参数说明

`dump` 或 `dumps`

- **obj**: 必需参数，要被序列化的Python对象。这个对象可以是字典、列表、字符串、数字、布尔值等基本类型，或者是这些类型的组合。
- **fp**: 必需参数，一个文件对象，从中读取JSON数据。通常情况下，这个文件对象是之前使用 `open(filename, 'r')` 打开的用于读取的文件。
- **ensure_ascii** (默认True): 如果为True，所有的非ASCII字符都会被转义为\uXXXX形式的Unicode编码。如果为False，这些字符会以原生形式输出。

- **indent** (默认None): 用于缩进的空格数，以美化输出（如果是None，则输出为单行）。如果是一个正整数，那么每一级缩进就会有这么多的空格。
- **allow_nan** (默认True): 如果为True，NaN, Infinity, -Infinity会被允许并被编码为相应的JSON格式。如果为False，则会抛出ValueError。
- **separators** (默认None): 一个包含两个元素的元组，用于自定义分隔符。默认是 `(', ', ': ')`，即逗号和冒号。例如，可以设置为 `(',', ': ')` 来去掉输出中的空格。
- **sort_keys** (默认False): 如果为True，输出的字典的键会按照字典序排序。这对于生成一致性的输出很有用，尤其是当JSON用于配置或者与其他系统交互时。





`load` 或 `loads`

- **parse_float** (默认None): 可以指定一个函数来解析JSON中的浮点数。如果你需要特殊的浮点数处理（比如始终将浮点数解析为 `decimal.Decimal`），可以使用此参数。
- **parse_int** (默认None): 类似于 `parse_float`，用于指定一个函数来解析JSON中的整数。这对于需要特殊整数处理（如总是将整数解析为 `int` 而不是 `float` 当遇到没有小数部分的数值）的情况很有用。
- **parse_constant** (默认None): 可以指定一个函数来解析JSON中的字符串常量（如 "null", "true", "false"）。这主要用于自定义这些常量的解析行为。



